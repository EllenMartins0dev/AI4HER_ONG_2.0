function maskCPF(e){return e=(e=(e=(e=e.replace(/\D/g,"")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d)/,"$1.$2")).replace(/(\d{3})(\d{1,2})$/,"$1-$2")}function maskPhone(e){return(e=e.replace(/\D/g,"")).length<=2?e:e.length<=6?e.replace(/(\d{2})(\d+)/,"($1) $2"):e.length<=10?e.replace(/(\d{2})(\d{4})(\d+)/,"($1) $2-$3"):e.replace(/(\d{2})(\d{5})(\d+)/,"($1) $2-$3")}function maskCEP(e){return e=(e=e.replace(/\D/g,"")).replace(/(\d{5})(\d+)/,"$1-$2")}function showMessage(e,t,a="sucesso",n=4e3){e.textContent=t,e.className=`msg ${a}`,e.style.display="block",setTimeout(()=>e.style.display="none",n)}function drawPie(e,t,a,n){let r=e.getContext("2d"),l=t.reduce((e,t)=>e+t,0),i=e.width/2,o=e.height/2,s=Math.min(i,o)-30,d=-.5*Math.PI;for(let c=0;c<t.length;c++){let u=t[c]/l*2*Math.PI;r.beginPath(),r.moveTo(i,o),r.arc(i,o,s,d,d+u),r.closePath(),r.fillStyle=a[c%a.length],r.fill(),d+=u}}function drawLine(e,t,a){let n=e.getContext("2d"),r=e.width,l=e.height,i=Math.max(...t);n.clearRect(0,0,r,l),n.strokeStyle="#ccc",n.beginPath(),n.moveTo(40,l-40),n.lineTo(r-40,l-40),n.stroke(),n.beginPath(),n.moveTo(40,l-40),n.lineTo(40,40),n.stroke(),n.fillStyle="#000",n.font="12px sans-serif";for(let o=0;o<=5;o++){let s=l-40-(l-80)*(o/5);n.fillText(Math.round(i*(o/5)),5,s+4),n.beginPath(),n.strokeStyle="#eee",n.moveTo(40,s),n.lineTo(r-40,s),n.stroke()}n.beginPath(),n.lineWidth=2,n.strokeStyle=a;let d=(r-80)/(t.length-1);for(let c=0;c<t.length;c++){let u=40+c*d,m=l-40-(l-80)*(t[c]/i);0===c?n.moveTo(u,m):n.lineTo(u,m),n.beginPath(),n.arc(u,m,4,0,2*Math.PI),n.fillStyle=a,n.fill()}n.stroke()}function drawBars(e,t,a,n){let r=e.getContext("2d"),l=e.width,i=e.height,o=Math.max(...t);r.clearRect(0,0,l,i);let s=(l-80)/t.length-10;r.fillStyle="#000",r.font="12px sans-serif";for(let d=0;d<t.length;d++){let c=40+d*(s+10),u=(i-80)*(t[d]/o);r.fillStyle=n,r.fillRect(c,i-40-u,s,u),r.fillStyle="#111",r.fillText(t[d],c+4,i-40-u-6),r.fillText(a[d],c+2,i-5)}}document.addEventListener("DOMContentLoaded",function(){function e(e,a,n,r){let l=document.getElementById(e),i=document.getElementById(a);l&&i&&(i.setAttribute("role","alert"),l.addEventListener("submit",function(e){e.preventDefault();let a=!0;if(l.querySelectorAll("input, textarea, select").forEach(e=>{e.checkValidity()?e.removeAttribute("aria-invalid"):(e.setAttribute("aria-invalid","true"),a=!1)}),!a){t(i,"❌ Por favor, preencha todos os campos obrigat\xf3rios corretamente.","erro"),i.focus();return}let o=l.querySelector('input[name="nome"]')||l.querySelector('input[type="text"]'),s=l.querySelector('input[type="email"]');o&&s&&(localStorage.setItem(r+"_nome",o.value),localStorage.setItem(r+"_email",s.value)),t(i,n,"sucesso"),i.focus(),l.reset();let d=document.getElementById("metodo_pagamento"),c=document.getElementById("pix_area"),u=document.getElementById("card_area");d&&(d.style.display="none"),c&&(c.style.display="none",c.setAttribute("aria-hidden","true")),u&&(u.style.display="none",u.setAttribute("aria-hidden","true")),localStorage.removeItem("dadosDoacao"),localStorage.removeItem("ultimoTipoDoacao")}))}function t(e,t,a){e.textContent=t,e.className="msg "+a,setTimeout(()=>{e.textContent="",e.className="msg"},4e3)}document.querySelectorAll("input[data-mask]").forEach(e=>{e.addEventListener("input",()=>{let t=e.dataset.mask;"cpf"===t&&(e.value=maskCPF(e.value)),"phone"===t&&(e.value=maskPhone(e.value)),"cep"===t&&(e.value=maskCEP(e.value))})}),e("form_vol","msg_vol","✅ Inscri\xe7\xe3o enviada com sucesso!","vol"),e("donForm","msg_don","✅ Doa\xe7\xe3o registrada com sucesso!","don"),e("contact_form","msg_contato","✅ Mensagem enviada com sucesso!","cont");let a=document.getElementById("don_tipo"),n=document.getElementById("metodo_pagamento"),r=document.getElementById("don_pagamento"),l=document.getElementById("pix_area"),i=document.getElementById("card_area"),o={name:document.getElementById("card_name"),number:document.getElementById("card_number"),expiry:document.getElementById("card_expiry"),cvv:document.getElementById("card_cvv")};function s(){Object.values(o).forEach(e=>e.removeAttribute("required"))}a&&a.addEventListener("change",()=>{"financeiro"===a.value?(n.style.display="flex",n.setAttribute("aria-hidden","false")):(n.style.display="none",n.setAttribute("aria-hidden","true"),l.style.display="none",l.setAttribute("aria-hidden","true"),i.style.display="none",i.setAttribute("aria-hidden","true"),r.value="",s()),localStorage.setItem("ultimoTipoDoacao",a.value)}),r&&r.addEventListener("change",()=>{if("pix"===r.value){l.style.display="block",i.style.display="none",s(),Object.values(o).forEach(e=>e.value="");let e=document.getElementById("pix_qrcode");e.innerHTML="",new QRCode(e,{text:"pix@ai4her.org",width:180,height:180,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H})}else"debito"===r.value||"credito"===r.value?(i.style.display="grid",l.style.display="none",Object.values(o).forEach(e=>e.setAttribute("required","required"))):(l.style.display="none",i.style.display="none",s(),Object.values(o).forEach(e=>e.value=""));localStorage.setItem("ultimoMetodoPagamento",r.value)});let d=document.getElementById("donForm");if(d){let c=localStorage.getItem("ultimoTipoDoacao");c&&(a.value=c,a.dispatchEvent(new Event("change")));let u=localStorage.getItem("ultimoMetodoPagamento");u&&(r.value=u,r.dispatchEvent(new Event("change")));let m=localStorage.getItem("dadosDoacao");if(m){let g=JSON.parse(m);Object.entries(g).forEach(([e,t])=>{let a=d.elements[e];a&&(a.value=t)})}d.addEventListener("input",()=>{let e=Object.fromEntries(new FormData(d).entries());localStorage.setItem("dadosDoacao",JSON.stringify(e))})}let p=document.getElementById("newsletter_form");if(p){let f=document.getElementById("msg_news");f||((f=document.createElement("span")).id="msg_news",f.className="msg",f.setAttribute("role","alert"),f.style.display="block",f.style.marginTop="10px",p.appendChild(f)),p.addEventListener("submit",e=>{e.preventDefault();let a=!0;if(p.querySelectorAll("input, select").forEach(e=>{e.checkValidity()?e.removeAttribute("aria-invalid"):(e.setAttribute("aria-invalid","true"),a=!1)}),!a){f.textContent="❌ Por favor, preencha todos os campos corretamente.",f.className="msg erro",f.focus();return}let n=p.querySelector('input[type="email"]'),r=p.querySelector('select[name="pref"]');n&&localStorage.setItem("newsletter_email",n.value),r&&localStorage.setItem("newsletter_pref",r.value),t(f,"✅ Pedido de assinatura aceito! A resposta ser\xe1 enviada por e-mail.","sucesso"),p.reset()})}let $=document.querySelector(".menu-toggle"),y=document.querySelector(".nav");$?.addEventListener("click",()=>{let e=$.classList.toggle("active");y?.classList.toggle("active"),$.setAttribute("aria-expanded",e?"true":"false")}),$?.addEventListener("keydown",e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),$.click())});let v=document.querySelector(".carousel");if(v){let h=v.querySelector(".gallery"),E=h.querySelectorAll("picture"),S=v.querySelector(".prev"),_=v.querySelector(".next"),b=0;function I(e){b=(e+E.length)%E.length,h.style.transform=`translateX(${-(100*b)}%)`}S?.addEventListener("click",()=>I(b-1)),_?.addEventListener("click",()=>I(b+1)),setInterval(()=>I(b+1),5e3)}let k=document.getElementById("chart_pizza"),L=document.getElementById("chart_line"),x=document.getElementById("chart_bars");function w(e,t,...a){if(!e)return;let n=e.parentElement;e.width=n.clientWidth,e.height=320,t(e,...a)}function P(){w(k,drawPie,[75,25],["#2b7a78","#56c596"],["CodeGirls","Inclus\xe3o Digital"]),w(L,drawLine,[2,5,8,12,20,25,30],"#2b7a78"),w(x,drawBars,[5,15,10,30,0],["Norte","Nordeste","Sul","Sudeste","Centro-Oeste"],"#2b7a78")}window.addEventListener("resize",P),setTimeout(P,100),P(),document.querySelectorAll("ul li a").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),function e(){let{jsPDF:t}=window.jspdf,a=new t("p","mm","a4"),n=a.internal.pageSize.height;a.setFontSize(18),a.text("Relat\xf3rio de Transpar\xeancia 2024",10,20);let r=30;function l(e,t){if(!e)return;let l=e.toDataURL("image/png"),i=e.width/e.height,o=140,s=o/i;s>100&&(o=(s=100)*i);let d=(a.internal.pageSize.width-o)/2;r+s+20>n&&(a.addPage(),r=20),t&&(a.setFontSize(14),r+10>n&&(a.addPage(),r=20),a.text(t,(a.internal.pageSize.width-a.getTextWidth(t))/2,r),r+=8),a.addImage(l,"PNG",d,r,o,s),r+=s+10}l(k,"Participa\xe7\xe3o por Programa"),l(L,"Engajamento ao Longo do Ano"),l(x,"Distribui\xe7\xe3o Regional");let i=`
O projeto AI4Her impactou diversas regi\xf5es em 2024, promovendo inclus\xe3o digital e participa\xe7\xe3o feminina em STEM.
- No gr\xe1fico de pizza, 75% das participantes estiveram no CodeGirls e 25% em Inclus\xe3o Digital.
- O gr\xe1fico de linhas mostra o crescimento do engajamento ao longo do ano.
- O gr\xe1fico de barras evidencia a distribui\xe7\xe3o regional, com maior presen\xe7a no Sudeste e Nordeste.
    `,o=a.splitTextToSize(i,140);r+6*o.length>n&&(a.addPage(),r=20),a.setFontSize(12),a.setTextColor(0,0,0),a.text(o,(a.internal.pageSize.width-140)/2,r),a.save("relatorio_transparencia_2024.pdf")}()})})}),document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector("main.container");function t(){let e=document.getElementById("chart_pizza"),t=document.getElementById("chart_line"),a=document.getElementById("chart_bars");function n(e,t,...a){if(!e)return;let n=e.parentElement;e.width=n.clientWidth,e.height=320,t(e,...a)}function r(){n(e,drawPie,[75,25],["#2b7a78","#56c596"],["CodeGirls","Inclus\xe3o Digital"]),n(t,drawLine,[2,5,8,12,20,25,30],"#2b7a78"),n(a,drawBars,[5,15,10,30,0],["Norte","Nordeste","Sul","Sudeste","Centro-Oeste"],"#2b7a78")}window.addEventListener("resize",r),setTimeout(r,100),r()}function a(){document.querySelectorAll("input[data-mask]").forEach(e=>{e.addEventListener("input",t=>{let a=e.dataset.mask;"cpf"===a&&(e.value=maskCPF(e.value)),"phone"===a&&(e.value=maskPhone(e.value)),"cep"===a&&(e.value=maskCEP(e.value))})}),handleForm("form_vol","msg_vol","✅ Obrigado! Sua inscri\xe7\xe3o como volunt\xe1rio(a) foi enviada."),handleForm("donForm","msg_don","✅ Obrigado! Sua doa\xe7\xe3o foi enviada com sucesso."),handleForm("contact_form","msg_contato","✅ Obrigado! Sua mensagem foi enviada com sucesso.")}function n(){let e=document.querySelector(".carousel");if(!e)return;let t=e.querySelector(".gallery"),a=t.querySelectorAll("picture"),n=e.querySelector(".prev"),r=e.querySelector(".next"),l=0;function i(e){l=(e+a.length)%a.length,t.style.transform=`translateX(${-(100*l)}%)`}n?.addEventListener("click",()=>i(l-1)),r?.addEventListener("click",()=>i(l+1)),setInterval(()=>i(l+1),5e3)}function r(){let e=document.querySelector(".menu-toggle"),t=document.querySelector(".nav");e?.addEventListener("click",()=>{t?.classList.toggle("active"),e.classList.toggle("active")})}function l(){t(),a(),n(),r()}async function i(l){try{let i=await fetch(l),o=await i.text(),s=new DOMParser,d=s.parseFromString(o,"text/html"),c=d.querySelector("main.container");c&&(e.innerHTML=c.innerHTML,history.pushState(null,"",l),window.scrollTo({top:0,behavior:"smooth"}),n(),r(),l.includes("cadastros.html")&&a(),l.includes("transparencia.html")&&t())}catch(u){console.error("Erro ao carregar p\xe1gina SPA:",u)}}e&&(l(),document.body.addEventListener("click",e=>{let t=e.target.closest("a");if(!t)return;let a=t.getAttribute("href");!a||a.startsWith("http")||a.startsWith("mailto:")||a.startsWith("#")||(e.preventDefault(),i(a))}),window.addEventListener("popstate",()=>i(location.href)))});